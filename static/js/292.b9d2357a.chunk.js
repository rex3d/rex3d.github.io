"use strict";(self.webpackChunkrex3d_website=self.webpackChunkrex3d_website||[]).push([[292],{7292:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var r=a(9379),i=a(5043),l=a(9981),n=a(4210),t=a(579);const o=e=>{let{setOrderIdForStatusCheck:s}=e;const[a,o]=(0,i.useState)({name:"",email:"",description:"",sku:"",dimensions:"",color:"#FFFFFF",purpose:"",material:"",precision:"",quantity:1}),[c,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(""),h=(0,l.Zp)(),p=e=>{const{name:s,value:a}=e.target;o(e=>(0,r.A)((0,r.A)({},e),{},{[s]:"quantity"===s?parseInt(a,10)||0:a}))};return(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsxs)("div",{className:"col-md-10",children:["error"===m&&(0,t.jsx)("div",{className:"alert alert-danger",children:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas wysy\u0142ania formularza. Sprawd\u017a konsol\u0119, aby uzyska\u0107 wi\u0119cej informacji."}),"success"===m&&(0,t.jsx)("div",{className:"alert alert-success",children:"Twoje zapytanie zosta\u0142o wys\u0142ane! Przekierowuj\u0119 na stron\u0119 podzi\u0119kowania..."}),(0,t.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u("sending");const s="REX3D-".concat(Date.now());let r=[];try{if(c.length>0)for(const a of c){a.name.split(".").pop();const e="".concat(s,"/").concat(Date.now(),"-").concat(a.name),{error:i}=await n.N.storage.from("custom-order-files").upload(e,a,{cacheControl:"3600",upsert:!1});if(i)throw console.error("File upload error:",i),new Error("Nie uda\u0142o si\u0119 przes\u0142a\u0107 pliku: "+a.name);const{data:l}=n.N.storage.from("custom-order-files").getPublicUrl(e);r.push(l.publicUrl)}const{error:e}=await n.N.from("custom_orders").insert([{order_id:s,customer_name:a.name,customer_email:a.email,description:a.description,sku:a.sku||null,color_hex:a.color,dimensions:a.dimensions,purpose:a.purpose,material:a.material,precision:a.precision,quantity:a.quantity,file_urls:r,status:"nowe"}]);if(e)throw console.error("Supabase submission error:",e),new Error("Nie uda\u0142o si\u0119 zapisa\u0107 zam\xf3wienia.");u("success"),h("/podziekowanie",{state:{orderId:s}})}catch(i){console.error("Submission failed:",i.message),u("error")}},children:[(0,t.jsxs)("div",{className:"card mb-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-light fw-bold",children:"Dane kontaktowe i opis projektu"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"name",className:"form-label",children:"Imi\u0119 i Nazwisko"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"name",name:"name",value:a.name,onChange:p,required:!0})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"email",className:"form-label",children:"Adres E-mail"}),(0,t.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:a.email,onChange:p,required:!0})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{htmlFor:"description",className:"form-label",children:"Opis projektu"}),(0,t.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:"5",value:a.description,onChange:p,required:!0,placeholder:"Opisz co chcia\u0142by\u015b wydrukowa\u0107, jakie ma mie\u0107 zastosowanie, itp."})]}),(0,t.jsxs)("div",{className:"col-12",children:[(0,t.jsx)("label",{htmlFor:"sku",className:"form-label",children:"SKU produktu (je\u015bli zamawiasz niestandardow\u0105 wersj\u0119 istniej\u0105cego produktu)"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"sku",name:"sku",value:a.sku||"",onChange:p,placeholder:"Opcjonalnie: Wpisz SKU istniej\u0105cego produktu"})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"dimensions",className:"form-label",children:"Przybli\u017cone wymiary (np. 10cm x 5cm x 3cm)"}),(0,t.jsx)("input",{type:"text",className:"form-control",id:"dimensions",name:"dimensions",value:a.dimensions,onChange:p})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"color",className:"form-label",children:"Preferowany kolor"}),(0,t.jsx)("input",{type:"color",className:"form-control form-control-color",id:"color",name:"color",value:a.color,onChange:p,title:"Wybierz kolor"})]})]})})]}),(0,t.jsxs)("div",{className:"card mb-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-light fw-bold",children:"Szczeg\xf3\u0142y techniczne"}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"purpose",className:"form-label",children:"Przeznaczenie modelu"}),(0,t.jsxs)("select",{className:"form-select",id:"purpose",name:"purpose",value:a.purpose,onChange:p,children:[(0,t.jsx)("option",{value:"",children:"Wybierz..."}),(0,t.jsx)("option",{value:"prototyp",children:"Prototyp"}),(0,t.jsx)("option",{value:"funkcjonalny",children:"Element funkcjonalny"}),(0,t.jsx)("option",{value:"ozdoba",children:"Ozdoba/Figurka"}),(0,t.jsx)("option",{value:"zabawka",children:"Zabawka"}),(0,t.jsx)("option",{value:"inny",children:"Inny"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"material",className:"form-label",children:"Preferowany materia\u0142"}),(0,t.jsxs)("select",{className:"form-select",id:"material",name:"material",value:a.material,onChange:p,children:[(0,t.jsx)("option",{value:"",children:"Wybierz..."}),(0,t.jsx)("option",{value:"PLA",children:"PLA"}),(0,t.jsx)("option",{value:"PETG",children:"PETG"}),(0,t.jsx)("option",{value:"ABS",children:"ABS"}),(0,t.jsx)("option",{value:"zywica",children:"\u017bywica"}),(0,t.jsx)("option",{value:"inny",children:"Inny"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"precision",className:"form-label",children:"Wymagana precyzja/jako\u015b\u0107 powierzchni"}),(0,t.jsxs)("select",{className:"form-select",id:"precision",name:"precision",value:a.precision,onChange:p,children:[(0,t.jsx)("option",{value:"",children:"Wybierz..."}),(0,t.jsx)("option",{value:"standardowa",children:"Standardowa"}),(0,t.jsx)("option",{value:"wysoka",children:"Wysoka"}),(0,t.jsx)("option",{value:"gladka",children:"G\u0142adka (wymaga obr\xf3bki)"})]})]}),(0,t.jsxs)("div",{className:"col-md-6",children:[(0,t.jsx)("label",{htmlFor:"quantity",className:"form-label",children:"Ilo\u015b\u0107 sztuk"}),(0,t.jsx)("input",{type:"number",className:"form-control",id:"quantity",name:"quantity",value:a.quantity,onChange:p,min:"1"})]})]})})]}),(0,t.jsxs)("div",{className:"card mb-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-light fw-bold",children:"Za\u0142\u0105czniki"}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("label",{htmlFor:"file",className:"form-label",children:"Za\u0142\u0105cz plik (opcjonalnie)"}),(0,t.jsx)("input",{type:"file",className:"form-control",id:"file",name:"file",onChange:e=>{d(Array.from(e.target.files))},multiple:!0}),c.length>0&&(0,t.jsxs)("p",{className:"text-muted mt-2",children:["Wybrane pliki: ",c.map(e=>e.name).join(", ")]})]}),(0,t.jsx)("p",{className:"small text-muted mt-3",children:"Mo\u017cliwo\u015b\u0107 za\u0142\u0105czenia plik\xf3w (szkic\xf3w, modeli .stl) zostanie udost\u0119pniona w dalszej korespondencji mailowej."})]})]}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100 mt-3",disabled:"sending"===m,children:"sending"===m?"Wysy\u0142anie...":"Wy\u015blij zapytanie o zam\xf3wienie"})]})]})})},c=e=>{let{initialOrderId:s}=e;const[a,r]=(0,i.useState)(s||""),[l,o]=(0,i.useState)(null),[c,d]=(0,i.useState)([]),[m,u]=(0,i.useState)(""),[h,p]=(0,i.useState)(s?"loading":""),j=[{status:"nowe",label:"Nowe"},{status:"wycena w toku",label:"Wycena"},{status:"oczekiwanie na akceptacj\u0119",label:"Oczekiwanie na akceptacj\u0119"},{status:"zaakceptowane",label:"Zaakceptowane"},{status:"w realizacji",label:"W Realizacji"},{status:"gotowe do odbioru",label:"Gotowe do Odbioru"},{status:"zako\u0144czone",label:"Zako\u0144czone"}],x=j.findIndex(e=>e.status===(null===l||void 0===l?void 0:l.status)),b=async e=>{if(p("loading"),o(null),d([]),e)try{const{data:s,error:a}=await n.N.from("custom_orders").select("*").eq("order_id",e).single();if(a&&"PGRST116"!==a.code)return console.error("Error fetching order:",a),void p("error");if(s){o(s),p("found");const{data:a,error:r}=await n.N.from("order_comments").select("*").eq("order_id",e).order("created_at",{ascending:!0});r?console.error("Error fetching comments:",r):d(a)}else p("not_found")}catch(s){console.error("Unexpected error:",s),p("error")}else p("error")};i.useEffect(()=>{s&&(r(s),b(s))},[s]);return(0,t.jsx)("div",{className:"row justify-content-center",children:(0,t.jsxs)("div",{className:"col-md-8",children:[(0,t.jsx)("div",{className:"card mb-4 shadow-sm",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("h5",{className:"card-title mb-3 text-primary",children:"Sprawd\u017a status swojego zam\xf3wienia"}),(0,t.jsx)("form",{onSubmit:e=>{e.preventDefault(),b(a)},children:(0,t.jsxs)("div",{className:"input-group mb-3",children:[(0,t.jsx)("input",{type:"text",className:"form-control form-control-lg",placeholder:"Wpisz numer zam\xf3wienia (np. REX3D-123456789)",value:a,onChange:e=>r(e.target.value),required:!0}),(0,t.jsx)("button",{className:"btn btn-primary btn-lg",type:"submit",disabled:"loading"===h,children:"loading"===h?"Szukanie...":"Sprawd\u017a"})]})})]})}),"found"===h&&l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"card mt-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-primary text-white",children:(0,t.jsxs)("h5",{className:"mb-0 text-white",children:["Szczeg\xf3\u0142y Zam\xf3wienia: ",l.order_id]})}),(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsxs)("div",{className:"mb-3",children:[(0,t.jsx)("strong",{children:"Status:"})," ",(0,t.jsx)("span",{className:"badge ".concat("zako\u0144czone"===l.status?"bg-success":"anulowane"===l.status||"odrzucone"===l.status?"bg-danger":"bg-info text-dark"),children:l.status})]}),(0,t.jsx)("div",{className:"progress mb-3",style:{height:"25px"},children:j.map((e,s)=>(0,t.jsx)("div",{className:"progress-bar ".concat(s<=x?"bg-primary":"bg-secondary"),role:"progressbar",style:{width:"".concat(100/j.length,"%")},"aria-valuenow":s+1,"aria-valuemin":"0","aria-valuemax":j.length,children:e.label},e.status))}),(0,t.jsx)("h6",{className:"mt-4 mb-2",children:"Dane zam\xf3wienia:"}),(0,t.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Opis:"})," ",l.description]}),l.sku&&(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"SKU:"})," ",l.sku]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Wymiary:"})," ",l.dimensions||"Brak"]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Kolor:"})," ",(0,t.jsx)("span",{style:{backgroundColor:l.color_hex,padding:"2px 8px",borderRadius:"5px",border:"1px solid #ccc"},children:l.color_hex})]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Przeznaczenie:"})," ",l.purpose||"Brak"]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Materia\u0142:"})," ",l.material||"Brak"]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Precyzja:"})," ",l.precision||"Brak"]}),(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Ilo\u015b\u0107:"})," ",l.quantity||"Brak"]}),l.file_urls&&l.file_urls.length>0&&(0,t.jsxs)("li",{className:"list-group-item",children:[(0,t.jsx)("strong",{children:"Pliki:"}),l.file_urls.map((e,s)=>(0,t.jsx)("span",{className:"d-block",children:(0,t.jsxs)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:["Pobierz plik ",s+1]})},s))]})]}),l.quote_price&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("strong",{children:"Wycena:"})," ",(0,t.jsxs)("span",{className:"badge bg-success fs-5",children:[l.quote_price," z\u0142"]})]}),l.admin_comment&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("strong",{children:"Komentarz Administratora:"})," ",(0,t.jsx)("p",{className:"d-inline",children:l.admin_comment})]}),l.quote_price&&"oczekiwanie na akceptacj\u0119"===l.status&&(0,t.jsxs)("div",{className:"mt-4 d-flex justify-content-center",children:[(0,t.jsx)("button",{className:"btn btn-success me-2",onClick:()=>(async e=>{if(window.confirm("Czy na pewno chcesz zaakceptowa\u0107 t\u0119 wycen\u0119?")){const{error:s}=await n.N.from("custom_orders").update({status:"zaakceptowane"}).eq("order_id",e);s?(console.error("Error accepting quote:",s),alert("Nie uda\u0142o si\u0119 zaakceptowa\u0107 wyceny.")):b(e)}})(l.order_id),children:"Akceptuj Wycen\u0119"}),(0,t.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Czy na pewno chcesz odrzuci\u0107 t\u0119 wycen\u0119?")){const{error:s}=await n.N.from("custom_orders").update({status:"odrzucone"}).eq("order_id",e);s?(console.error("Error rejecting quote:",s),alert("Nie uda\u0142o si\u0119 odrzuci\u0107 wyceny.")):b(e)}})(l.order_id),children:"Odrzu\u0107 Wycen\u0119"})]}),(0,t.jsx)("p",{className:"text-muted mt-3 mb-0",children:(0,t.jsxs)("small",{children:["Z\u0142o\u017cono: ",new Date(l.created_at).toLocaleString()]})})]})]}),c.length>0&&(0,t.jsxs)("div",{className:"card mt-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-light",children:(0,t.jsx)("h5",{className:"mb-0 text-dark",children:"Historia Komentarzy"})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsx)("div",{className:"list-group list-group-flush",children:c.map(e=>(0,t.jsxs)("div",{className:"list-group-item ".concat(e.is_admin_comment?"bg-light":""),children:[(0,t.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,t.jsx)("h6",{className:"mb-1",children:e.is_admin_comment?"Administrator":"Klient"}),(0,t.jsx)("small",{className:"text-muted",children:new Date(e.created_at).toLocaleString()})]}),(0,t.jsx)("p",{className:"mb-1",children:e.comment_text})]},e.id))})})]}),(0,t.jsxs)("div",{className:"card mt-4 shadow-sm",children:[(0,t.jsx)("div",{className:"card-header bg-light",children:(0,t.jsx)("h5",{className:"mb-0 text-dark",children:"Dodaj Komentarz"})}),(0,t.jsx)("div",{className:"card-body",children:(0,t.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m.trim()||!a)return;const{error:s}=await n.N.from("order_comments").insert([{order_id:a,comment_text:m,is_admin_comment:!1}]);if(s)console.error("Error submitting comment:",s),alert("Nie uda\u0142o si\u0119 wys\u0142a\u0107 komentarza.");else{u("");const{data:e,error:s}=await n.N.from("order_comments").select("*").eq("order_id",a).order("created_at",{ascending:!0});s?console.error("Error re-fetching comments after submission:",s):d(e)}},children:[(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("textarea",{className:"form-control",rows:"3",placeholder:"Wpisz sw\xf3j komentarz...",value:m,onChange:e=>u(e.target.value),required:!0})}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100",disabled:!m.trim(),children:"Wy\u015blij Komentarz"})]})})]})]}),"not_found"===h&&(0,t.jsxs)("div",{className:"alert alert-warning mt-4 text-center",role:"alert",children:[(0,t.jsx)("h4",{className:"alert-heading",children:"Nie znaleziono zam\xf3wienia!"}),(0,t.jsx)("p",{children:"Sprawd\u017a, czy numer zam\xf3wienia jest poprawny i spr\xf3buj ponownie."})]}),"error"===h&&(0,t.jsxs)("div",{className:"alert alert-danger mt-4 text-center",role:"alert",children:[(0,t.jsx)("h4",{className:"alert-heading",children:"Wyst\u0105pi\u0142 b\u0142\u0105d!"}),(0,t.jsx)("p",{children:"Nie uda\u0142o si\u0119 wyszuka\u0107 zam\xf3wienia. Spr\xf3buj ponownie p\xf3\u017aniej."})]})]})})},d=()=>{const[e,s]=(0,i.useState)("submit"),[a,r]=(0,i.useState)(null);return(0,t.jsxs)("div",{className:"container mt-5 pt-5",children:[(0,t.jsxs)("div",{className:"text-center mb-5",children:[(0,t.jsx)("h1",{className:"display-4 fw-bold mb-3",children:"Twoje Niestandardowe Zam\xf3wienia 3D"}),(0,t.jsx)("p",{className:"lead text-muted",children:"Tutaj mo\u017cesz z\u0142o\u017cy\u0107 nowe, unikalne zam\xf3wienie na druk 3D, idealnie dopasowane do Twoich potrzeb, lub sprawdzi\u0107 aktualny status swojego istniej\u0105cego projektu."}),(0,t.jsxs)("div",{className:"row justify-content-center mt-4",children:[(0,t.jsx)("div",{className:"col-md-5 mb-3",children:(0,t.jsx)("div",{className:"card h-100 p-3 shadow-sm border-primary",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("i",{className:"bi bi-box-seam-fill text-primary fs-1 mb-3"})," ",(0,t.jsx)("h5",{className:"card-title",children:"Z\u0142\xf3\u017c Nowe Zam\xf3wienie"}),(0,t.jsx)("p",{className:"card-text text-muted",children:"Opisz sw\xf3j pomys\u0142, a my zajmiemy si\u0119 reszt\u0105. Od prototypu po gotowy produkt!"})]})})}),(0,t.jsx)("div",{className:"col-md-5 mb-3",children:(0,t.jsx)("div",{className:"card h-100 p-3 shadow-sm border-success",children:(0,t.jsxs)("div",{className:"card-body",children:[(0,t.jsx)("i",{className:"bi bi-truck-flatbed text-success fs-1 mb-3"})," ",(0,t.jsx)("h5",{className:"card-title",children:"Sprawd\u017a Status"}),(0,t.jsx)("p",{className:"card-text text-muted",children:"\u015aled\u017a post\u0119py swojego zam\xf3wienia w czasie rzeczywistym, od wyceny po realizacj\u0119."})]})})})]})]}),(0,t.jsxs)("ul",{className:"nav nav-pills nav-justified mb-4",children:[(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link btn btn-lg ".concat("submit"===e?"active":""),onClick:()=>s("submit"),children:"Z\u0142\xf3\u017c nowe zam\xf3wienie"})}),(0,t.jsx)("li",{className:"nav-item",children:(0,t.jsx)("button",{className:"nav-link btn btn-lg ".concat("status"===e?"active":""),onClick:()=>s("status"),children:"Sprawd\u017a status zam\xf3wienia"})})]}),"submit"===e&&(0,t.jsx)(o,{setOrderIdForStatusCheck:e=>{r(e),s("status")}}),"status"===e&&(0,t.jsx)(c,{initialOrderId:a})]})}}}]);
//# sourceMappingURL=292.b9d2357a.chunk.js.map