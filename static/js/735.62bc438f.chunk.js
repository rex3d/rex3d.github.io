"use strict";(self.webpackChunkrex3d_website=self.webpackChunkrex3d_website||[]).push([[735],{7735:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var l=a(9379),t=a(5043),c=a(9981),r=a(579);const n=()=>(0,r.jsx)("div",{className:"col-md-4 mb-4",children:(0,r.jsxs)("div",{className:"card h-100 skeleton-card",children:[(0,r.jsx)("div",{className:"skeleton-image"}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{className:"skeleton-text skeleton-title"}),(0,r.jsx)("div",{className:"skeleton-text skeleton-line-1"}),(0,r.jsx)("div",{className:"skeleton-text skeleton-line-2"})]})]})}),o=e=>{if(!e)return 0;const s=parseFloat(String(e).replace(",",".").replace(" z\u0142",""));return isNaN(s)?0:s},i=e=>{if(!e||!e.heightOptions||0===e.heightOptions.length)return 0;const s=e.heightOptions.map(e=>o(e.promoPrice||e.price));return Math.min(...s)},d=e=>!(!e||!e.heightOptions)&&e.heightOptions.some(e=>e.promoPrice),m=(e,s)=>{const a=e.flatMap(e=>e[s]||[]);return["all",...Array.from(new Set(a))]},h={"Bia\u0142y":"#FFFFFF",Zielony:"#28a745","\u017b\xf3\u0142ty":"#ffc107",Czarny:"#000000",Szary:"#6c757d","Jasny br\u0105z":"#D2B48C",Niebieski:"#007bff",Czerwony:"#dc3545","Jasny Br\u0105z":"#D2B48C"};const x=function(){const[e,s]=(0,t.useState)([]),[a,x]=(0,t.useState)(!0),[p,u]=(0,t.useState)(null),[j,b]=(0,t.useState)(""),[N,f]=(0,t.useState)({category:"all",color:"all",promotion:!1,isNew:!1}),[g,v]=(0,t.useState)("default"),[y,w]=(0,t.useState)([0,100]),[k,C]=(0,t.useState)([0,100]),[O,z]=(0,t.useState)(null),F=e=>{if(!e)return"";if(e.startsWith("http")||e.startsWith("data:"))return e;return"/Rex3DDD"+(e.startsWith("/")?e:"/"+e)},S=async()=>{x(!0),u(null);try{const e="".concat("/Rex3DDD","/products.json"),a=await fetch(e);if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));const l=await a.json();s(l||[]);const t=l.map(e=>i(e)).filter(e=>Number.isFinite(e)),c=t.length?Math.min(...t):0,r=t.length?Math.max(...t):100,n=0===r?100:r;C([c,n]),w([c,n])}catch(e){console.error("Error fetching products:",e),u(e.message||"B\u0142\u0105d pobierania produkt\xf3w")}finally{x(!1)}};(0,t.useEffect)(()=>{S()},[]),(0,t.useEffect)(()=>(document.body.style.overflow=O?"hidden":"auto",()=>document.body.style.overflow="auto"),[O]);const P=e=>{const{name:s,value:a,type:t,checked:c}=e.target;f(e=>(0,l.A)((0,l.A)({},e),{},{[s]:"checkbox"===t?c:a}))},B=(e,s)=>{const a=[...y];a[e]=s,w(a)},M=()=>{let[e,s]=y.map(e=>""===e?-1:parseFloat(e));-1===e&&(e=k[0]),-1===s&&(s=k[1]),w(e>s?[s,e]:[e,s])},D=()=>{b(""),f({category:"all",color:"all",promotion:!1,isNew:!1}),v("default"),w(k)},E=(0,t.useMemo)(()=>{if(a)return[];const[s,l]=y.map(parseFloat);return e.filter(e=>{const a="all"===N.category||e.category===N.category,t="all"===N.color||(e.colorOptions||[]).includes(N.color),c=""===j||(e.name||"").toLowerCase().includes(j.toLowerCase()),r=i(e),n=r>=s&&r<=l,o=!N.promotion||N.promotion&&d(e),m=!N.isNew||N.isNew&&e.isNew;return a&&t&&c&&n&&o&&m}).sort((e,s)=>{const a=i(e),l=i(s);switch(g){case"price-asc":return a-l;case"price-desc":return l-a;case"name-asc":return(e.name||"").localeCompare(s.name||"");case"name-desc":return(s.name||"").localeCompare(e.name||"");default:return 0}})},[j,N,g,y,e,a]),A=(0,t.useMemo)(()=>m(e,"category"),[e]),L=(0,t.useMemo)(()=>m(e,"colorOptions"),[e]),W=()=>(0,r.jsxs)("div",{className:"d-flex flex-column h-100",children:[(0,r.jsxs)("div",{className:"flex-grow-1",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"search",className:"form-label fw-bold",children:"Szukaj"}),(0,r.jsx)("input",{type:"text",id:"search",className:"form-control",placeholder:"Nazwa produktu...",value:j,onChange:e=>b(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"sortOrder",className:"form-label fw-bold",children:"Sortuj"}),(0,r.jsxs)("select",{id:"sortOrder",className:"form-select",value:g,onChange:e=>v(e.target.value),children:[(0,r.jsx)("option",{value:"default",children:"Domy\u015blnie"}),(0,r.jsx)("option",{value:"price-asc",children:"Cena: Rosn\u0105co"}),(0,r.jsx)("option",{value:"price-desc",children:"Cena: Malej\u0105co"}),(0,r.jsx)("option",{value:"name-asc",children:"Nazwa (A-Z)"}),(0,r.jsx)("option",{value:"name-desc",children:"Nazwa (Z-A)"})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"category",className:"form-label fw-bold",children:"Kategoria"}),(0,r.jsx)("select",{id:"category",name:"category",className:"form-select",value:N.category,onChange:P,children:A.map(e=>(0,r.jsx)("option",{value:e,children:"all"===e?"Wszystkie":e},e))})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"color",className:"form-label fw-bold",children:"Kolor"}),(0,r.jsx)("select",{id:"color",name:"color",className:"form-select",value:N.color,onChange:P,children:L.map(e=>(0,r.jsx)("option",{value:e,children:"all"===e?"Wszystkie":e},e))})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label fw-bold",children:"Cena"}),(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)("input",{type:"number",className:"form-control",value:y[0],onChange:e=>B(0,e.target.value),onBlur:M,placeholder:"Min"}),(0,r.jsx)("span",{className:"mx-2",children:"-"}),(0,r.jsx)("input",{type:"number",className:"form-control",value:y[1],onChange:e=>B(1,e.target.value),onBlur:M,placeholder:"Max"})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",name:"promotion",id:"filterPromotion",checked:N.promotion,onChange:P}),(0,r.jsx)("label",{className:"form-check-label",htmlFor:"filterPromotion",children:"Poka\u017c promocje"})]}),(0,r.jsxs)("div",{className:"form-check",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",name:"isNew",id:"filterNew",checked:N.isNew,onChange:P}),(0,r.jsx)("label",{className:"form-check-label",htmlFor:"filterNew",children:"Poka\u017c nowo\u015bci"})]})]})]}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsxs)("button",{className:"btn btn-primary w-100 mb-2","data-bs-dismiss":"offcanvas",children:["Poka\u017c produkty (",E.length,")"]}),(0,r.jsx)("button",{className:"btn btn-outline-secondary w-100",onClick:D,children:"Wyczy\u015b\u0107 wszystkie filtry"})]})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"offcanvas offcanvas-start",tabIndex:"-1",id:"filtersOffcanvas","aria-labelledby":"filtersOffcanvasLabel",children:[(0,r.jsxs)("div",{className:"offcanvas-header",children:[(0,r.jsx)("h5",{className:"offcanvas-title",id:"filtersOffcanvasLabel",children:"Filtruj i Sortuj"}),(0,r.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})]}),(0,r.jsx)("div",{className:"offcanvas-body",children:(0,r.jsx)(W,{})})]}),(0,r.jsxs)("div",{className:"container mt-5 pt-5",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h1",{className:"display-5",children:"Nasze Produkty"}),(0,r.jsx)("p",{className:"lead text-muted",children:"Przegl\u0105daj nasz\u0105 kolekcj\u0119 unikalnych wydruk\xf3w 3D."})]}),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,r.jsx)("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#filtersOffcanvas","aria-controls":"filtersOffcanvas",children:"Filtry"}),!a&&(0,r.jsxs)("span",{className:"text-muted",children:[E.length," z ",e.length," produkt\xf3w"]})]}),p&&(0,r.jsxs)("div",{className:"alert alert-danger",children:["B\u0142\u0105d \u0142adowania produkt\xf3w: ",p,(0,r.jsx)("button",{className:"btn btn-sm btn-outline-light ms-3",onClick:S,children:"Spr\xf3buj ponownie"})]}),a?(0,r.jsx)("div",{className:"row",children:Array.from({length:6}).map((e,s)=>(0,r.jsx)(n,{},s))}):(0,r.jsx)("div",{className:"row",children:E.map(e=>{const s=(e=>e&&e.heightOptions&&0!==e.heightOptions.length?e.heightOptions.reduce((e,s)=>{const a=o(e.promoPrice||e.price);return o(s.promoPrice||s.price)<a?s:e}):null)(e),a=d(e);return(0,r.jsx)("div",{className:"col-md-4 mb-4",children:(0,r.jsxs)("div",{className:"card h-100 product-card",children:[(0,r.jsxs)("div",{className:"position-relative",children:[(0,r.jsx)("img",{src:F(e.mainImage),className:"card-img-top product-card-img",alt:e.name}),(0,r.jsxs)("div",{className:"position-absolute top-0 start-0 p-2",children:[e.isNew&&(0,r.jsx)("span",{className:"badge bg-success me-1",children:"NOWO\u015a\u0106"}),a&&(0,r.jsx)("span",{className:"badge bg-danger me-1",children:"PROMOCJA"}),e.isBestseller&&(0,r.jsx)("span",{className:"badge bg-warning text-dark",children:"BESTSELLER"})]})]}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:e.name}),null!==s&&void 0!==s&&s.promoPrice?(0,r.jsxs)("p",{className:"card-text",children:["od ",(0,r.jsx)("s",{className:"text-muted me-1",children:s.price}),(0,r.jsx)("span",{className:"text-danger fw-bold ms-1",children:s.promoPrice})]}):(0,r.jsxs)("p",{className:"card-text text-muted",children:["od ",null===s||void 0===s?void 0:s.price]})]}),(0,r.jsxs)("div",{className:"card-footer bg-transparent border-top-0 pb-3",children:[(0,r.jsx)("button",{onClick:()=>z(e),className:"btn btn-sm btn-outline-secondary me-2",children:"Szybki podgl\u0105d"}),(0,r.jsx)(c.N_,{to:"/products/".concat(e.id),className:"btn btn-sm btn-primary",children:"Zobacz szczeg\xf3\u0142y"})]})]})},e.id)})}),O&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:(0,r.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:O.name}),(0,r.jsx)("button",{type:"button",className:"btn-close",onClick:()=>z(null)})]}),(0,r.jsx)("div",{className:"modal-body",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-6",children:(0,r.jsxs)("div",{className:"position-relative",children:[(0,r.jsx)("img",{src:F(O.mainImage),className:"img-fluid rounded",alt:O.name}),(0,r.jsxs)("div",{className:"position-absolute top-0 start-0 p-2",children:[O.isNew&&(0,r.jsx)("span",{className:"badge bg-success me-1",children:"NOWO\u015a\u0106"}),d(O)&&(0,r.jsx)("span",{className:"badge bg-danger me-1",children:"PROMOCJA"}),O.isBestseller&&(0,r.jsx)("span",{className:"badge bg-warning text-dark",children:"BESTSELLER"})]})]})}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("p",{children:O.description}),(0,r.jsx)("h6",{children:"Opcje:"}),(0,r.jsx)("ul",{children:(O.heightOptions||[]).map(e=>(0,r.jsxs)("li",{children:[e.label," - ",(0,r.jsx)("strong",{children:e.promoPrice?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("s",{className:"text-muted me-2",children:e.price}),(0,r.jsx)("span",{className:"text-danger",children:e.promoPrice})]}):e.price})]},e.label))}),(0,r.jsx)("h6",{children:"Dost\u0119pne kolory:"}),(0,r.jsx)("div",{className:"d-flex flex-wrap mb-4",children:(O.colorOptions||[]).map(e=>(0,r.jsx)("span",{className:"color-swatch-detail me-2 mb-2",style:{backgroundColor:h[e]||"#ccc"},title:e},e))}),(0,r.jsx)(c.N_,{to:"/products/".concat(O.id),className:"btn btn-primary mt-3",children:"Id\u017a do strony produktu"})]})]})})]})})}),(0,r.jsx)("div",{className:"modal-backdrop fade show",onClick:()=>z(null)})]})]})]})}}}]);
//# sourceMappingURL=735.62bc438f.chunk.js.map