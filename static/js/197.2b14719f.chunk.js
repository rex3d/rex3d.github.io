"use strict";(self.webpackChunkrex3d_website=self.webpackChunkrex3d_website||[]).push([[197],{948:(e,s,a)=>{a.d(s,{A:()=>l});var t=a(9379),r=a(5043),n=a(4210),i=a(579);const c=e=>{let{rating:s,onRatingChange:a}=e;const[t,n]=(0,r.useState)(0),c=Array.from({length:5},(e,s)=>s+1);return(0,i.jsx)("div",{children:c.map(e=>(0,i.jsx)("span",{className:"star",style:{cursor:"pointer",color:e<=(t||s)?"gold":"gray"},onClick:()=>a(e),onMouseEnter:()=>n(e),onMouseLeave:()=>n(0),children:"\u2605"},e))})},l=e=>{let{productSku:s,productName:a,onSubmitSuccess:l}=e;const[o,d]=(0,r.useState)({autor:"",komentarz:"",rating:5,sku:s||""}),[m,h]=(0,r.useState)({isLoading:!1,error:null}),p=e=>{const{name:s,value:a}=e.target;d(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a}))};return(0,i.jsx)("div",{className:"card mb-4",children:(0,i.jsxs)("div",{className:"card-body",children:[(0,i.jsx)("h5",{className:"card-title",children:"Dodaj swoj\u0105 opini\u0119"}),a&&(0,i.jsxs)("p",{className:"text-muted",children:["Oceniasz produkt: ",(0,i.jsx)("strong",{children:a})]}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!o.autor||!o.komentarz)return void h({isLoading:!1,error:"Wype\u0142nij wszystkie pola."});h({isLoading:!0,error:null});const a={autor:o.autor,komentarz:o.komentarz,rating:parseInt(o.rating,10),product_sku:o.sku||null},{error:t}=await n.N.from("opinie").insert([a]);t?(console.error("Error adding opinion: ",t),h({isLoading:!1,error:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas dodawania opinii."})):(h({isLoading:!1,error:null}),d({autor:"",komentarz:"",rating:5,sku:s||""}),l&&l())},children:[!s&&(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"sku",className:"form-label",children:"SKU Produktu (opcjonalnie)"}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"sku",name:"sku",value:o.sku,onChange:p})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"author",className:"form-label",children:"Twoje imi\u0119"}),(0,i.jsx)("input",{type:"text",className:"form-control",id:"author",name:"autor",value:o.autor,onChange:p,required:!0})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{htmlFor:"text",className:"form-label",children:"Tre\u015b\u0107 opinii"}),(0,i.jsx)("textarea",{className:"form-control",id:"text",name:"komentarz",rows:"3",value:o.komentarz,onChange:p,required:!0})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("label",{className:"form-label",children:"Ocena:"}),(0,i.jsx)(c,{rating:o.rating,onRatingChange:e=>d(s=>(0,t.A)((0,t.A)({},s),{},{rating:e}))})]}),(0,i.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",disabled:m.isLoading,children:m.isLoading?"Dodawanie...":"Dodaj Opini\u0119"}),m.error&&(0,i.jsx)("p",{className:"text-danger mt-2",children:m.error})]})]})})}},5220:(e,s,a)=>{a.d(s,{A:()=>r});a(5043);var t=a(579);const r=e=>{let{rating:s}=e;const a=Number(s)||0,r=[];for(let n=1;n<=5;n++)n<=a?r.push((0,t.jsx)("span",{className:"text-warning",children:"\u2605"},n)):r.push((0,t.jsx)("span",{className:"text-muted",children:"\u2606"},n));return(0,t.jsx)("div",{children:r})}},6197:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(5043),r=a(9981),n=a(4210),i=a(5220),c=a(948),l=a(9367),o=a(579);const d=e=>{if(null===e||void 0===e)return"";const s=parseFloat(e);return isNaN(s)?e:"".concat(s%1===0?s:s.toFixed(2).replace(".",",")," z\u0142")},m=e=>{if(!e||!e.heightOptions||0===e.heightOptions.length)return 0;const s=e.heightOptions.map(e=>(e=>{if(!e)return 0;const s=parseFloat(String(e).replace(",",".").replace(" z\u0142",""));return isNaN(s)?0:s})(e.promoPrice||e.price));return Math.min(...s)},h=e=>!(!e||!e.heightOptions)&&e.heightOptions.some(e=>e.promoPrice),p={"Bia\u0142y":"#FFFFFF",Zielony:"#28a745","\u017b\xf3\u0142ty":"#ffc107",Czarny:"#000000",Szary:"#6c757d","Jasny br\u0105z":"#D2B48C",Niebieski:"#007bff",Czerwony:"#dc3545","Jasny Br\u0105z":"#D2B48C"},x=()=>{const{id:e}=(0,r.g)(),[s,a]=(0,t.useState)([]),[x,u]=(0,t.useState)(!0),j=s.find(s=>String(s.id)===String(e)),[g,b]=(0,t.useState)(""),[N,v]=(0,t.useState)(null),[y,f]=(0,t.useState)([]),[k,w]=(0,t.useState)(!0),[S,D]=(0,t.useState)(!1),[z,O]=(0,t.useState)(null),C=e=>{if(!e)return"";if(e.startsWith("http")||e.startsWith("data:"))return e;const s="/Rex3DDD";return e.startsWith("/")?"".concat(s).concat(e):"".concat(s,"/").concat(e)},F=(0,t.useCallback)(async()=>{u(!0);try{const e="".concat("/Rex3DDD","/products.json"),s=await fetch(e);if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const t=await s.json();a(Array.isArray(t)?t:[])}catch(e){console.error("Error fetching products:",e),a([])}finally{u(!1)}},[]),A=(0,t.useCallback)(async()=>{if(j){w(!0);try{const{data:e,error:s}=await n.N.from("opinie").select("*").eq("product_sku",j.sku);s?(console.error("Error fetching reviews:",s),f([])):f(e||[])}catch(e){console.error("Error fetching reviews:",e),f([])}finally{w(!1)}}},[j]);(0,t.useEffect)(()=>{F()},[F]),(0,t.useEffect)(()=>{j&&(b(j.mainImage||""),v(j.heightOptions&&j.heightOptions[0]||null),A())},[j,A]);if(x)return(0,o.jsx)("div",{className:"container mt-5 pt-5 text-center",children:(0,o.jsx)("p",{children:"\u0141adowanie produktu..."})});if(!j)return(0,o.jsx)("div",{className:"container mt-5 pt-5 text-center",children:(0,o.jsx)("h2",{children:"Produkt nie znaleziony"})});const E=(e=>{let s,a=e.length;for(;0!==a;)s=Math.floor(Math.random()*a),a--,[e[a],e[s]]=[e[s],e[a]];return e})((s||[]).filter(e=>e.category===j.category&&String(e.id)!==String(j.id))).slice(0,3);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.mg,{children:[(0,o.jsxs)("title",{children:[j.name," | Rex3D"]}),(0,o.jsx)("meta",{name:"description",content:j.description}),(0,o.jsx)("meta",{property:"og:title",content:j.name}),(0,o.jsx)("meta",{property:"og:description",content:j.description}),(0,o.jsx)("meta",{property:"og:image",content:C(j.mainImage)}),(0,o.jsx)("meta",{property:"og:url",content:window.location.href})]}),(0,o.jsx)("div",{className:"container mt-5 pt-5",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsxs)("div",{className:"col-lg-7",children:[(0,o.jsx)("img",{src:C(g),className:"img-fluid w-100 mb-3 rounded sticky-top",style:{top:"100px"},alt:"G\u0142\xf3wne zdj\u0119cie ".concat(j.name)}),j.gallery&&j.gallery.length>1&&(0,o.jsx)("div",{className:"row g-2",children:j.gallery.map((e,s)=>(0,o.jsx)("div",{className:"col-2",children:(0,o.jsx)("img",{src:C(e),className:"img-fluid product-detail-gallery-thumbnail ".concat(g===e?"active":""),alt:"".concat(j.name," - zdj\u0119cie ").concat(s+1),onClick:()=>b(e)})},s))})]}),(0,o.jsxs)("div",{className:"col-lg-5",children:[(0,o.jsx)("h1",{className:"display-5 fw-bold",children:j.name}),(0,o.jsx)("div",{className:"fs-2 fw-bolder mb-2",children:null!==N&&void 0!==N&&N.promoPrice?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("s",{className:"text-muted me-2 fs-4",children:d(N.price)}),(0,o.jsx)("span",{children:d(N.promoPrice)})]}):(0,o.jsx)("span",{children:d(null===N||void 0===N?void 0:N.price)})}),(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsxs)("span",{className:"badge bg-light text-dark fs-6",children:["SKU: ",j.sku]})}),j.heightOptions&&j.heightOptions.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"mt-4",children:"Wybierz opcj\u0119:"}),(0,o.jsx)("div",{className:"btn-group flex-wrap mb-4",role:"group",children:j.heightOptions.map(e=>(0,o.jsx)("button",{type:"button",className:"btn product-detail-option-btn ".concat((null===N||void 0===N?void 0:N.label)===e.label?"active":""),onClick:()=>v(e),children:e.label},e.label))})]}),j.colorOptions&&j.colorOptions.length>0&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("h5",{className:"mt-4",children:"Dost\u0119pne kolory:"}),(0,o.jsx)("div",{className:"d-flex flex-wrap mb-4",children:j.colorOptions.map(e=>(0,o.jsx)("span",{className:"color-swatch-detail me-2 mb-2",style:{backgroundColor:p[e]||"#ccc"},title:e},e))})]}),(0,o.jsxs)("div",{className:"accordion accordion-flush mt-4",id:"productDetailsAccordion",children:[(0,o.jsxs)("div",{className:"accordion-item",children:[(0,o.jsx)("h2",{className:"accordion-header",id:"headingDesc",children:(0,o.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseDesc","aria-expanded":"true","aria-controls":"collapseDesc",children:"Opis"})}),(0,o.jsx)("div",{id:"collapseDesc",className:"accordion-collapse collapse show","aria-labelledby":"headingDesc","data-bs-parent":"#productDetailsAccordion",children:(0,o.jsx)("div",{className:"accordion-body",children:j.description})})]}),(0,o.jsxs)("div",{className:"accordion-item",children:[(0,o.jsx)("h2",{className:"accordion-header",id:"headingDetails",children:(0,o.jsx)("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseDetails","aria-expanded":"false","aria-controls":"collapseDetails",children:"Dodatkowe informacje"})}),(0,o.jsx)("div",{id:"collapseDetails",className:"accordion-collapse collapse","aria-labelledby":"headingDetails","data-bs-parent":"#productDetailsAccordion",children:(0,o.jsx)("div",{className:"accordion-body",children:(0,o.jsxs)("p",{children:["Kategoria: ",j.category]})})})]})]})]})]})}),(0,o.jsx)("section",{className:"py-5 bg-light",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("h2",{className:"section-title",children:"Opinie o produkcie"}),k?(0,o.jsx)("p",{className:"text-center",children:"\u0141adowanie opinii..."}):y.length>0?(0,o.jsx)("div",{className:"row",children:y.slice(0,4).map(e=>(0,o.jsx)("div",{className:"col-md-6 mb-4",children:(0,o.jsx)("div",{className:"card h-100",children:(0,o.jsxs)("div",{className:"card-body",children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,o.jsx)("h5",{className:"card-title",children:e.autor}),(0,o.jsx)(i.A,{rating:e.rating})]}),(0,o.jsx)("p",{className:"card-text",children:e.komentarz}),(0,o.jsx)("small",{className:"text-muted",children:new Date(e.created_at).toLocaleDateString()})]})})},e.id))}):(0,o.jsx)("p",{className:"text-center text-muted",children:"Brak opinii dla tego produktu."}),(0,o.jsxs)("div",{className:"text-center mt-4",children:[S?(0,o.jsxs)("div",{className:"mt-4 p-4 border rounded bg-white",children:[(0,o.jsx)(c.A,{productSku:j.sku,productName:j.name,onSubmitSuccess:()=>{D(!1),A()}}),(0,o.jsx)("button",{className:"btn btn-sm btn-outline-secondary mt-2",onClick:()=>D(!1),children:"Anuluj"})]}):(0,o.jsx)("button",{className:"btn btn-primary",onClick:()=>D(!0),children:"Napisz opini\u0119"}),(0,o.jsx)(r.N_,{to:"/opinie",className:"btn btn-outline-secondary ms-2",children:"Zobacz wszystkie opinie"})]})]})}),E.length>0&&(0,o.jsx)("section",{className:"py-5",children:(0,o.jsxs)("div",{className:"container",children:[(0,o.jsx)("h2",{className:"section-title",children:"Polecane produkty"}),(0,o.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3",children:E.map(e=>{const s=m(e),a=h(e);return(0,o.jsx)("div",{className:"col",children:(0,o.jsxs)("div",{className:"card h-100",children:[(0,o.jsxs)("div",{className:"position-relative",style:{overflow:"hidden"},children:[(0,o.jsx)("img",{src:C(e.mainImage),className:"card-img-top product-card-img",alt:e.name}),(0,o.jsxs)("div",{className:"position-absolute top-0 start-0 p-2",children:[e.isNew&&(0,o.jsx)("span",{className:"badge bg-success me-1",children:"NOWO\u015a\u0106"}),a&&(0,o.jsx)("span",{className:"badge bg-danger me-1",children:"PROMOCJA"}),e.isBestseller&&(0,o.jsx)("span",{className:"badge bg-warning text-dark",children:"BESTSELLER"})]})]}),(0,o.jsxs)("div",{className:"card-body text-center",children:[(0,o.jsx)("h5",{className:"card-title text-dark",children:e.name}),(0,o.jsxs)("p",{className:"card-text text-muted fw-bold",children:["od ",d(s)]})]}),(0,o.jsxs)("div",{className:"card-footer bg-transparent border-top-0 pb-3 text-center",children:[(0,o.jsx)("button",{onClick:()=>O(e),className:"btn btn-sm btn-outline-secondary me-2",children:"Szybki podgl\u0105d"}),(0,o.jsx)(r.N_,{to:"/products/".concat(e.id),className:"btn btn-sm btn-primary",children:"Zobacz szczeg\xf3\u0142y"})]})]})},e.id)})})]})}),z&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:(0,o.jsx)("div",{className:"modal-dialog modal-lg modal-dialog-centered",children:(0,o.jsxs)("div",{className:"modal-content",children:[(0,o.jsxs)("div",{className:"modal-header",children:[(0,o.jsx)("h5",{className:"modal-title",children:z.name}),(0,o.jsx)("button",{type:"button",className:"btn-close",onClick:()=>O(null)})]}),(0,o.jsx)("div",{className:"modal-body",children:(0,o.jsxs)("div",{className:"row",children:[(0,o.jsx)("div",{className:"col-md-6",children:(0,o.jsxs)("div",{className:"position-relative",children:[(0,o.jsx)("img",{src:C(z.mainImage),className:"img-fluid rounded",alt:z.name}),(0,o.jsxs)("div",{className:"position-absolute top-0 start-0 p-2",children:[z.isNew&&(0,o.jsx)("span",{className:"badge bg-success me-1",children:"NOWO\u015a\u0106"}),h(z)&&(0,o.jsx)("span",{className:"badge bg-danger me-1",children:"PROMOCJA"}),z.isBestseller&&(0,o.jsx)("span",{className:"badge bg-warning text-dark",children:"BESTSELLER"})]})]})}),(0,o.jsxs)("div",{className:"col-md-6",children:[(0,o.jsx)("p",{children:z.description}),(0,o.jsx)("h6",{children:"Opcje:"}),(0,o.jsx)("ul",{children:(z.heightOptions||[]).map(e=>(0,o.jsxs)("li",{children:[e.label," - ",(0,o.jsx)("strong",{children:e.promoPrice?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("s",{className:"text-muted me-2",children:d(e.price)}),(0,o.jsx)("span",{className:"text-danger",children:d(e.promoPrice)})]}):d(e.price)})]},e.label))}),(0,o.jsx)("h6",{children:"Dost\u0119pne kolory:"}),(0,o.jsx)("div",{className:"d-flex flex-wrap mb-4",children:(z.colorOptions||[]).map(e=>(0,o.jsx)("span",{className:"color-swatch-detail me-2 mb-2",style:{backgroundColor:p[e]||"#ccc"},title:e},e))}),(0,o.jsx)(r.N_,{to:"/products/".concat(z.id),className:"btn btn-primary mt-3",children:"Id\u017a do strony produktu"})]})]})})]})})}),(0,o.jsx)("div",{className:"modal-backdrop fade show",onClick:()=>O(null)})]})]})}}}]);
//# sourceMappingURL=197.2b14719f.chunk.js.map